{% extends 'base.html.twig' %}

{% block title %}Espace utilisateur - EcoRide{% endblock %}

{% block body %}
<main class="pt-5 mt-5 flex-grow-1">
    <div class="container profile-layout bg-eco-green text-eco-cream p-4 rounded shadow">

        <h1 class="text-center mb-5">Espace utilisateur</h1>

        <div class="row">
            <!-- Colonne gauche -->
            <div class="col-12 col-lg-4 text-center mb-4 mb-lg-0 d-flex flex-column align-items-center">
                <img src="{{ user.photoProfil ?? asset('uploads/users/default_profil.png') }}"
                        alt="Photo de profil"
                        class="rounded-circle mb-2"
                        style="width: 100px; height: 100px; object-fit: cover;">

                <div class="leaf-rating mb-2" style="font-size: 1.5rem;">
                    {% set moyenne = user.average_rating ?? 0 %}
                    {% for i in 1..moyenne %}
                        ğŸŒ¿
                    {% endfor %}
                </div>

                <a href="{#{{ path('app_historique') }}#}" class="btn btn-eco rounded-pill px-4 py-2 small">
                    Historique covoiturage
                </a>
            </div>

            <!-- Colonne droite -->
            <div class="col-12 col-lg-8 d-flex flex-column gap-3">
                <div class="section-user-box">
                    <span>Pseudo</span>
                    <span>{{ user.username }}</span>
                </div>
                <div class="section-user-box">
                    <span>Nom</span>
                    <span>{{ user.firstname }}</span>
                </div>
                <div class="section-user-box">
                    <span>PrÃ©nom</span>
                    <span>{{ user.surname }}</span>
                </div>
                <div class="section-user-box">
                    <span>Email</span>
                    <span>{{ user.email }}</span>
                </div>
                <div class="section-user-box">
                    <span>nÂ°tÃ©lÃ©phone</span>
                    <span>{{ user.phone }}</span>
                </div>
                <div class="section-user-box">
                    <span>Date de naissance</span>
                    <span>
                        {#{{ user.date_birth ? user.date_birth|date('d/m/Y') : 'Non renseignÃ©e' }}#}
                    </span>
                </div>
                <div class="section-user-box">
                    <span>CrÃ©dits restants</span>
                    <span>{{ user.credit ?? 0 }} crÃ©dits</span>
                </div>

                <div class="text-center mt-3">
                    <a href="{#{{ path('app_modifier_profil') }}#}"
                        class="btn btn-eco px-4 py-2 rounded-pill fw-bold btn-responsive">
                        Modifier mon compte
                    </a>
                </div>

                <div class="section-user-box mt-4">
                    <span>Statut chauffeur</span>
                    <div class="form-check form-switch m-0">
                        <input class="form-check-input" type="checkbox" id="isDriver" {% if user.isDriver %}checked{% endif %} disabled>
                    </div>
                </div>

                <div class="text-center mt-4">
                    <a href="{#{{ path('app_publier_trajet') }}#}"
                        class="btn btn-eco px-4 py-2 rounded-pill fw-bold btn-responsive">
                        Publier un trajet
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>


{% endblock %}
